/**
  * changeset v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("node:fs");
/**
  * streamIo v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */function e(t={}){const{scope:e,lib:n,version:r,msg:i}={lib:"noop",version:"patch",msg:"change all thing",...t};let a=`\n---\n"${e?`@${e}/${n}`:n}": ${r}\n---\n\n${i}\n`;return a=a.trim(),a}function n(t){const e=t.split(/\r?\n/);const n=function(t,e="---"){let n=0,r=0;for(let i=0;i<t.length;i+=1){if(t[i]===e&&(n+=1),2===n){r=i;break}}return r}(e);return{front:e.slice(0,n+1).join("\n"),body:e.slice(n+1).join("\n")}}const r=new class{constructor(t){this.init(t)}async read(e=""){const{file:n}=this;let r,i;r=t.createReadStream(n.name);try{i=await(a=r,new Promise(((t,e)=>{let n="";a.on("data",(t=>{n+=t.toString()})).on("end",(()=>{t(n)})).on("error",e)})))}catch(t){i=e}var a;return n.data=i,i}async write(e){const{file:n,option:r}=this;let i;i=t.createWriteStream(n.name);let a=e;"string"==typeof a?n.data=a:a=n.data,await function({stream:t,data:e}){return new Promise(((n,r)=>{t.write(e,"utf-8"),t.end(),t.on("finish",(()=>{n(e)})).on("error",r)}))}({stream:i,data:a})}init(t="CHANGELO.md"){this.file={name:t,data:""},this.option={}}getLibVersionType(t){const{file:e,option:n}=this;return function(t,e){let n,r,i;return n="",i=new RegExp(`\\".*${e}\\": .*`,"ig"),r=t.match(i),r&&(n=r[0].split(":")[1].trim()),n}(e.data,t)}parse(){const{file:t,option:e}=this;return n(t.data)}make(t){const{file:n}=this,r=e(t);return n.data=r,r}};exports.changeset=r,exports.makeChangeset=e,exports.parseChangeset=n;
