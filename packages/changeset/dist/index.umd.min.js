/**
  * changeset v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("node:fs")):"function"==typeof define&&define.amd?define(["exports","node:fs"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).changeset={},e.node_fs)}(this,(function(e,t){"use strict";
/**
    * streamIo v1.0.0
    * (c) 2018-2022 ymc
    * @license MIT
    */
/**
    * streamIo v1.0.0
    * (c) 2018-2022 ymc
    * @license MIT
    */function n(e={}){const{scope:t,lib:n,version:i,msg:o}={lib:"noop",version:"patch",msg:"change all thing",...e};let r=`\n---\n"${t?`@${t}/${n}`:n}": ${i}\n---\n\n${o}\n`;return r=r.trim(),r}function i(e){const t=e.split(/\r?\n/);const n=function(e,t="---"){let n=0,i=0;for(let o=0;o<e.length;o+=1){if(e[o]===t&&(n+=1),2===n){i=o;break}}return i}(t);return{front:t.slice(0,n+1).join("\n"),body:t.slice(n+1).join("\n")}}const o=new class{constructor(e){this.init(e)}async read(e=""){const{file:n}=this;let i,o;i=t.createReadStream(n.name);try{o=await(r=i,new Promise(((e,t)=>{let n="";r.on("data",(e=>{n+=e.toString()})).on("end",(()=>{e(n)})).on("error",t)})))}catch(t){o=e}var r;return n.data=o,o}async write(e){const{file:n,option:i}=this;let o;o=t.createWriteStream(n.name);let r=e;"string"==typeof r?n.data=r:r=n.data,await function({stream:e,data:t}){return new Promise(((n,i)=>{e.write(t,"utf-8"),e.end(),e.on("finish",(()=>{n(t)})).on("error",i)}))}({stream:o,data:r})}init(e="CHANGELO.md"){this.file={name:e,data:""},this.option={}}getLibVersionType(e){const{file:t,option:n}=this;return function(e,t){let n,i,o;return n="",o=new RegExp(`\\".*${t}\\": .*`,"ig"),i=e.match(o),i&&(n=i[0].split(":")[1].trim()),n}(t.data,e)}parse(){const{file:e,option:t}=this;return i(e.data)}make(e){const{file:t}=this,i=n(e);return t.data=i,i}};e.changeset=o,e.makeChangeset=n,e.parseChangeset=i,Object.defineProperty(e,"__esModule",{value:!0})}));
