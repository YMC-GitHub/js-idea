/**
  * changlogFileIo v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("node:fs");
/**
  * streamIo v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
/**
  * textStreamIo v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
class t{constructor(e="CHANGELO.md"){this.init(e)}async read(t=""){const{file:a}=this;let r,n;try{r=e.createReadStream(a.name),n=await(i=r,new Promise(((e,t)=>{let a="";i.on("data",(e=>{a+=e.toString()})).on("end",(()=>{e(a)})).on("error",t)})))}catch(e){n=t}var i;return a.data=n,n}async write(t){const{file:a,option:r}=this;let n,i,s;switch(n=e.createWriteStream(a.name),i=a.data,r.writemode){case"override":default:s=`${t}`;break;case"append":s=`${i}\n${t}`;break;case"head":s=`${t}\n${i}`}a.data=s,await function({stream:e,data:t}){return new Promise(((a,r)=>{e.write(t,"utf-8"),e.end(),e.on("finish",(()=>{a(t)})).on("error",r)}))}({stream:n,data:s})}init(e="CHANGELO.md",t=""){return this.file={name:e,data:t},this.option={},this}new(...e){return new t(...e)}}new t;class a extends t{constructor(e="CHANGELO.md"){super(),this.init(e)}getLastCommitLabel(e=/\[[0-9a-z]{9}\]/gi,t=/^\[|\]$/gi){const{file:a}=this,r=a.data.match(e);let n="";return r&&([n]=r),n=n.replace(t,""),n}init(e="CHANGELO.md"){this.file={name:e,data:""},this.option={}}}const r=new a;exports.ChanelogFile=a,exports.changelogfile=r;
