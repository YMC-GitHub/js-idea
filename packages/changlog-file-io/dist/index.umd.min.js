/**
  * changlogFileIo v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("node:fs")):"function"==typeof define&&define.amd?define(["exports","node:fs"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["changlog-file-io"]={},e.node_fs)}(this,(function(e,t){"use strict";
/**
    * streamIo v1.0.0
    * (c) 2018-2022 ymc
    * @license MIT
    */
/**
    * textStreamIo v1.0.0
    * (c) 2018-2022 ymc
    * @license MIT
    */
class n{constructor(e="CHANGELO.md"){this.init(e)}async read(e=""){const{file:n}=this;let i,a;try{i=t.createReadStream(n.name),a=await(o=i,new Promise(((e,t)=>{let n="";o.on("data",(e=>{n+=e.toString()})).on("end",(()=>{e(n)})).on("error",t)})))}catch(t){a=e}var o;return n.data=a,a}async write(e){const{file:n,option:i}=this;let a,o,r;switch(a=t.createWriteStream(n.name),o=n.data,i.writemode){case"override":default:r=`${e}`;break;case"append":r=`${o}\n${e}`;break;case"head":r=`${e}\n${o}`}n.data=r,await function({stream:e,data:t}){return new Promise(((n,i)=>{e.write(t,"utf-8"),e.end(),e.on("finish",(()=>{n(t)})).on("error",i)}))}({stream:a,data:r})}init(e="CHANGELO.md",t=""){return this.file={name:e,data:t},this.option={},this}new(...e){return new n(...e)}}new n;class i extends n{constructor(e="CHANGELO.md"){super(),this.init(e)}getLastCommitLabel(e=/\[[0-9a-z]{9}\]/gi,t=/^\[|\]$/gi){const{file:n}=this,i=n.data.match(e);let a="";return i&&([a]=i),a=a.replace(t,""),a}init(e="CHANGELO.md"){this.file={name:e,data:""},this.option={}}}const a=new i;e.ChanelogFile=i,e.changelogfile=a,Object.defineProperty(e,"__esModule",{value:!0})}));
