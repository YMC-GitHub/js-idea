/**
  * cliOption v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
"use strict";function t(t){
/**
  * extendString v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
return function(t){return t.replace(/(?:^\w|[A-Z_-]|\b\w)/g,((t,e)=>{let n="";return n=t.replace(/[-_]+/g," "),n=0!==e?n.replace(/[A-Z]/," $&"):n,0===e?n.toUpperCase():n.toLowerCase()})).replace(/\s+/g," ")}(t).replace(/(?:^\w|[A-Z]|\b\w)/g,((t,e)=>0===e?t.toLowerCase():t.toUpperCase())).replace(/\s+/g,"")}function e(t,n=0,i=" "){return t.length>=n?String(t):e(t+i,n,i)}
/**
  * cliParam v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */function n(e,n={}){let i={};const s=Object.keys(e).map((t=>e[t])),r={slim:!0,modeStyle:"cli",...n};"string"===r.mode&&(r.slim=!0);for(let e=0;e<s.length;e+=1){const n=s[e],{name:o,type:l,value:a,desc:p}=n,[c,u]=o.split(/,/).map((t=>t.trim().replace(/^-*/gi,""))),m=c.length>1?c:u;if(m){if(r.noAutoCamelize||(i[t(m)]=a),r.slim)continue;i[m]=a}i[c]=a}return"string"===r.mode&&(i=function(t,e){const n={modeStyle:"cli",...e};let i="";return"string"===n.mode&&"cli"===n.modeStyle&&(i=Object.keys(t).map((e=>e.length>1?`--${e}=${t[e]}`:`-${e}=${t[e]}`)).join(" ")),"string"===n.mode&&"httpquery"===n.modeStyle&&(i=Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&")),"string"===n.mode&&"swithoption"===n.modeStyle&&(i=Object.keys(t).map((e=>`${e}=${t[e]}`)).join(";")),i}(i,r)),i}function i(e={},n={}){const i={slim:!0,...n};return i.noAutoCamelize||Object.keys(e).forEach((n=>{const s=t(n);s!==n&&(e[s]=e[n],i.slim&&delete e[n])})),e}Object.defineProperty(exports,"__esModule",{value:!0});const{log:s}=console;function r(t,e,n={}){let i;return i=t[e]?t[e]:n,i}function o(t,e="",n=""){let i=t;return e&&n?(i=r(i,e),i=r(i,n)):e?i=r(i,e):n&&(i=r(i,n)),i}function l(t="",e="l"){let n="";if(n=t.split(" ")[0].split(",").map((t=>t.replace(/^-*/gi,""))),"s"===e.toLowerCase())n=n[0];else n=n[1]?n[1]:n[0];return n}function a(t,e="",n=2){let i;return i=Array.isArray(t)?t:[t],i.join("\n").replace(/^/gim,Array(n).fill(e).join(""))}function p(t){let n=Array.isArray(t)?t:[t];const i=Math.max(...n.map((t=>t.split(" ")[0].length)));return n=n.map((t=>{const n=t.split(" ");let s=n[0];const r=n.slice(1);return s=e(s,i+6," "),`${s}${r.join(" ")}`})),n}function c(t,e=""){const n=new RegExp(` *${t}:.*`,"ig"),i=e.match(n);return i?i[0].replace(new RegExp(` *${t}:`,"i"),""):""}function u(t={},e="npm-bin",n="1.0.0",i=""){let s={};return s={...t,version:n,ns:e},i&&(s={autoSubCmd:c("subcmd",i),autoSubNs:c("subns",i)}),s}class m{constructor(){this.init()}init(){return this.optionMap={},this.opt="",this.relationMap={},this.cmd=new Set,this.ns=new Set,this.paramMap={},this}addOpt(t="",e="",n=""){const{optionMap:i,relationMap:s}=this,r=l(t);let a=i;return a[r]=t,a=o(s,e,n),a[r]=!0,this.cmd.add(n),this.ns.add(e),this}getOpt(t,e="",n=""){const{optionMap:i,relationMap:s}=this,r=i;return this.opt=r[t],this}logOpt(){return s(this.opt),this}bindOpt(t="",e=""){return this.addOpt(this.opt,t,e),this}usage(t="",e=""){const{optionMap:n,relationMap:i}=this;let s,r,l;s=o(i,t,e),r=Object.keys(s),r=r.filter((t=>!this.cmd.has(t))),r=r.filter((t=>!this.ns.has(t))),s=n,l=Object.keys(s).filter((t=>r.includes(t))).map((t=>s[t])),l=p(l),l=a(l," ",2),l=`option:\n${l}`;let c=[...this.ns].filter((t=>t.trim())).join("|");c=c?`subns:${c}`:"";let u=[...this.cmd].filter((t=>t.trim())).join("|");u=u?`subcmd:${u}`:"";let m="usage:{ns} [option]";return c&&(m=m.replace(/\[option\]$/,"[subns] [option]")),u&&(m=m.replace(/\[option\]$/,"[subcmd] [option]")),u&&(l=`${u}\n${l}`),c&&(l=`${c}\n${l}`),l=a(l," ",2),m&&(l=`${m}\n${l}`),l}param(t,e="",n=""){const{paramMap:i}=this;return t.forEach((t=>{i[t.name]||(i[t.name]=t);const{name:s,type:r,value:o,desc:l}=t;this.addOpt(`${s} ${l}`,e,n)})),this}getBuiltinConfig(t={}){const{paramMap:e}=this;return n(e,t)}getCliFlags(t,e={}){let n;const{entrys:s}=e;return n=t.flags||s&&s.notOnlyFlags?t.flags:t,i(n,e)}getCurrentFlags(t,e={}){let n;return n={...this.getBuiltinFlags(),...this.getCliFlags(t,e)},n=i(n,e),n}camelizeFlags(t={},e={}){return i(t,e)}updateEntryOption(t,e="npm-bin",n="1.0.0"){const{usagemsg:i}=this;return u(t,e,n,i)}}const g=new m;exports.CliOptionHelp=m,exports.beautyOptionText=p,exports.cliOptionHelp=g,exports.formatOptionText=a,exports.getCliOptionName=l,exports.getTxtFromUsage=c,exports.updateEntryOption=u;
