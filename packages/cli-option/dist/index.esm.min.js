/**
  * cliOption v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
/**
  * cliParam v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
/**
  * extendString v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
function t(t,e={}){let n={};const i=Object.keys(t).map((e=>t[e])),s={slim:!0,modeStyle:"cli",...e};"string"===s.mode&&(s.slim=!0);for(let t=0;t<i.length;t+=1){const e=i[t],{name:r,type:o,value:l,desc:a}=e,[p,c]=r.split(/,/).map((t=>t.trim().replace(/^-*/gi,""))),u=p.length>1?p:c;if(u){if(s.noAutoCamelize||(n[u.camelize()]=l),s.slim)continue;n[u]=l}n[p]=l}return"string"===s.mode&&(n=function(t,e){const n={modeStyle:"cli",...e};let i="";return"string"===n.mode&&"cli"===n.modeStyle&&(i=Object.keys(t).map((e=>e.length>1?`--${e}=${t[e]}`:`-${e}=${t[e]}`)).join(" ")),"string"===n.mode&&"httpquery"===n.modeStyle&&(i=Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&")),"string"===n.mode&&"swithoption"===n.modeStyle&&(i=Object.keys(t).map((e=>`${e}=${t[e]}`)).join(";")),i}(n,s)),n}function e(t={},e={}){const n={slim:!0,...e};return n.noAutoCamelize||Object.keys(t).forEach((e=>{const i=function(t){return t.replace(/(?:^\w|[A-Z_-]|\b\w)/g,((t,e)=>{let n="";return n=t.replace(/[-_]+/g," "),n=0!==e?n.replace(/[A-Z]/," $&"):n,0===e?n.toUpperCase():n.toLowerCase()})).replace(/\s+/g," ")}(e).replace(/(?:^\w|[A-Z]|\b\w)/g,((t,e)=>0===e?t.toLowerCase():t.toUpperCase())).replace(/\s+/g,"");i!==e&&(t[i]=t[e],n.slim&&delete t[e])})),t}
/**
  * extendString v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */function n(t,e=0,i=" "){return t.length>=e?String(t):n(t+i,e,i)}const{log:i}=console;function s(t,e,n={}){let i;return i=t[e]?t[e]:n,i}function r(t,e="",n=""){let i=t;return e&&n?(i=s(i,e),i=s(i,n)):e?i=s(i,e):n&&(i=s(i,n)),i}function o(t="",e="l"){let n="";if(n=t.split(" ")[0].split(",").map((t=>t.replace(/^-*/gi,""))),"s"===e.toLowerCase())n=n[0];else n=n[1]?n[1]:n[0];return n}function l(t,e="",n=2){let i;return i=Array.isArray(t)?t:[t],i.join("\n").replace(/^/gim,Array(n).fill(e).join(""))}function a(t){let e=Array.isArray(t)?t:[t];const i=Math.max(...e.map((t=>t.split(" ")[0].length)));return e=e.map((t=>{const e=t.split(" ");let s=e[0];const r=e.slice(1);return s=n(s,i+6," "),`${s}${r.join(" ")}`})),e}function p(t,e=""){const n=new RegExp(` *${t}:.*`,"ig"),i=e.match(n);return i?i[0].replace(new RegExp(` *${t}:`,"i"),""):""}function c(t={},e="npm-bin",n="1.0.0",i=""){let s={};return s={...t,version:n,ns:e},i&&(s={autoSubCmd:p("subcmd",i),autoSubNs:p("subns",i)}),s}class u{constructor(){this.init()}init(){return this.optionMap={},this.opt="",this.relationMap={},this.cmd=new Set,this.ns=new Set,this.paramMap={},this}addOpt(t="",e="",n=""){const{optionMap:i,relationMap:s}=this,l=o(t);let a=i;return a[l]=t,a=r(s,e,n),a[l]=!0,this.cmd.add(n),this.ns.add(e),this}getOpt(t,e="",n=""){const{optionMap:i,relationMap:s}=this,r=i;return this.opt=r[t],this}logOpt(){return i(this.opt),this}bindOpt(t="",e=""){return this.addOpt(this.opt,t,e),this}usage(t="",e=""){const{optionMap:n,relationMap:i}=this;let s,o,p;s=r(i,t,e),o=Object.keys(s),o=o.filter((t=>!this.cmd.has(t))),o=o.filter((t=>!this.ns.has(t))),s=n,p=Object.keys(s).filter((t=>o.includes(t))).map((t=>s[t])),p=a(p),p=l(p," ",2),p=`option:\n${p}`;let c=[...this.ns].filter((t=>t.trim())).join("|");c=c?`subns:${c}`:"";let u=[...this.cmd].filter((t=>t.trim())).join("|");u=u?`subcmd:${u}`:"";let m="usage:{ns} [option]";return c&&(m=m.replace(/\[option\]$/,"[subns] [option]")),u&&(m=m.replace(/\[option\]$/,"[subcmd] [option]")),u&&(p=`${u}\n${p}`),c&&(p=`${c}\n${p}`),p=l(p," ",2),m&&(p=`${m}\n${p}`),p}param(t,e="",n=""){const{paramMap:i}=this;return t.forEach((t=>{i[t.name]||(i[t.name]=t);const{name:s,type:r,value:o,desc:l}=t;this.addOpt(`${s} ${l}`,e,n)})),this}getBuiltinConfig(e={}){const{paramMap:n}=this;return t(n,e)}getCliFlags(t,n={}){let i;const{entrys:s}=n;return i=t.flags||s&&s.notOnlyFlags?t.flags:t,e(i,n)}getCurrentFlags(t,n={}){let i;return i={...this.getBuiltinFlags(),...this.getCliFlags(t,n)},i=e(i,n),i}camelizeFlags(t={},n={}){return e(t,n)}updateEntryOption(t,e="npm-bin",n="1.0.0"){const{usagemsg:i}=this;return c(t,e,n,i)}}const m=new u;export{u as CliOptionHelp,a as beautyOptionText,m as cliOptionHelp,l as formatOptionText,o as getCliOptionName,p as getTxtFromUsage,c as updateEntryOption};
