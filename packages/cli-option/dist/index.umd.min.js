/**
  * cliOption v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["cli-option"]={})}(this,(function(t){"use strict";
/**
    * cliParam v1.0.0
    * (c) 2018-2022 ymc
    * @license MIT
    */
/**
    * extendString v1.0.0
    * (c) 2018-2022 ymc
    * @license MIT
    */function e(t,e={}){let n={};const i=Object.keys(t).map((e=>t[e])),s={slim:!0,modeStyle:"cli",...e};"string"===s.mode&&(s.slim=!0);for(let t=0;t<i.length;t+=1){const e=i[t],{name:o,type:r,value:l,desc:a}=e,[p,c]=o.split(/,/).map((t=>t.trim().replace(/^-*/gi,""))),u=p.length>1?p:c;if(u){if(s.noAutoCamelize||(n[u.camelize()]=l),s.slim)continue;n[u]=l}n[p]=l}return"string"===s.mode&&(n=function(t,e){const n={modeStyle:"cli",...e};let i="";return"string"===n.mode&&"cli"===n.modeStyle&&(i=Object.keys(t).map((e=>e.length>1?`--${e}=${t[e]}`:`-${e}=${t[e]}`)).join(" ")),"string"===n.mode&&"httpquery"===n.modeStyle&&(i=Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&")),"string"===n.mode&&"swithoption"===n.modeStyle&&(i=Object.keys(t).map((e=>`${e}=${t[e]}`)).join(";")),i}(n,s)),n}function n(t={},e={}){const n={slim:!0,...e};return n.noAutoCamelize||Object.keys(t).forEach((e=>{const i=function(t){return t.replace(/(?:^\w|[A-Z_-]|\b\w)/g,((t,e)=>{let n="";return n=t.replace(/[-_]+/g," "),n=0!==e?n.replace(/[A-Z]/," $&"):n,0===e?n.toUpperCase():n.toLowerCase()})).replace(/\s+/g," ")}(e).replace(/(?:^\w|[A-Z]|\b\w)/g,((t,e)=>0===e?t.toLowerCase():t.toUpperCase())).replace(/\s+/g,"");i!==e&&(t[i]=t[e],n.slim&&delete t[e])})),t}
/**
    * extendString v1.0.0
    * (c) 2018-2022 ymc
    * @license MIT
    */function i(t,e=0,n=" "){return t.length>=e?String(t):i(t+n,e,n)}const{log:s}=console;function o(t,e,n={}){let i;return i=t[e]?t[e]:n,i}function r(t,e="",n=""){let i=t;return e&&n?(i=o(i,e),i=o(i,n)):e?i=o(i,e):n&&(i=o(i,n)),i}function l(t="",e="l"){let n="";if(n=t.split(" ")[0].split(",").map((t=>t.replace(/^-*/gi,""))),"s"===e.toLowerCase())n=n[0];else n=n[1]?n[1]:n[0];return n}function a(t,e="",n=2){let i;return i=Array.isArray(t)?t:[t],i.join("\n").replace(/^/gim,Array(n).fill(e).join(""))}function p(t){let e=Array.isArray(t)?t:[t];const n=Math.max(...e.map((t=>t.split(" ")[0].length)));return e=e.map((t=>{const e=t.split(" ");let s=e[0];const o=e.slice(1);return s=i(s,n+6," "),`${s}${o.join(" ")}`})),e}function c(t,e=""){const n=new RegExp(` *${t}:.*`,"ig"),i=e.match(n);return i?i[0].replace(new RegExp(` *${t}:`,"i"),""):""}function u(t={},e="npm-bin",n="1.0.0",i=""){let s={};return s={...t,version:n,ns:e},i&&(s={autoSubCmd:c("subcmd",i),autoSubNs:c("subns",i)}),s}class m{constructor(){this.init()}init(){return this.optionMap={},this.opt="",this.relationMap={},this.cmd=new Set,this.ns=new Set,this.paramMap={},this}addOpt(t="",e="",n=""){const{optionMap:i,relationMap:s}=this,o=l(t);let a=i;return a[o]=t,a=r(s,e,n),a[o]=!0,this.cmd.add(n),this.ns.add(e),this}getOpt(t,e="",n=""){const{optionMap:i,relationMap:s}=this,o=i;return this.opt=o[t],this}logOpt(){return s(this.opt),this}bindOpt(t="",e=""){return this.addOpt(this.opt,t,e),this}usage(t="",e=""){const{optionMap:n,relationMap:i}=this;let s,o,l;s=r(i,t,e),o=Object.keys(s),o=o.filter((t=>!this.cmd.has(t))),o=o.filter((t=>!this.ns.has(t))),s=n,l=Object.keys(s).filter((t=>o.includes(t))).map((t=>s[t])),l=p(l),l=a(l," ",2),l=`option:\n${l}`;let c=[...this.ns].filter((t=>t.trim())).join("|");c=c?`subns:${c}`:"";let u=[...this.cmd].filter((t=>t.trim())).join("|");u=u?`subcmd:${u}`:"";let m="usage:{ns} [option]";return c&&(m=m.replace(/\[option\]$/,"[subns] [option]")),u&&(m=m.replace(/\[option\]$/,"[subcmd] [option]")),u&&(l=`${u}\n${l}`),c&&(l=`${c}\n${l}`),l=a(l," ",2),m&&(l=`${m}\n${l}`),l}param(t,e="",n=""){const{paramMap:i}=this;return t.forEach((t=>{i[t.name]||(i[t.name]=t);const{name:s,type:o,value:r,desc:l}=t;this.addOpt(`${s} ${l}`,e,n)})),this}getBuiltinConfig(t={}){const{paramMap:n}=this;return e(n,t)}getCliFlags(t,e={}){let i;const{entrys:s}=e;return i=t.flags||s&&s.notOnlyFlags?t.flags:t,n(i,e)}getCurrentFlags(t,e={}){let i;return i={...this.getBuiltinFlags(),...this.getCliFlags(t,e)},i=n(i,e),i}camelizeFlags(t={},e={}){return n(t,e)}updateEntryOption(t,e="npm-bin",n="1.0.0"){const{usagemsg:i}=this;return u(t,e,n,i)}}const g=new m;t.CliOptionHelp=m,t.beautyOptionText=p,t.cliOptionHelp=g,t.formatOptionText=a,t.getCliOptionName=l,t.getTxtFromUsage=c,t.updateEntryOption=u,Object.defineProperty(t,"__esModule",{value:!0})}));
