/**
  * cliOption v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["cli-option"]={})}(this,(function(t){"use strict";
/**
    * extendString v1.0.0
    * (c) 2018-2022 ymc
    * @license MIT
    */function e(t){return function(t){return t.replace(/(?:^\w|[A-Z_-]|\b\w)/g,((t,e)=>{let n="";return n=t.replace(/[-_]+/g," "),n=0!==e?n.replace(/[A-Z]/," $&"):n,0===e?n.toUpperCase():n.toLowerCase()})).replace(/\s+/g," ")}(t).replace(/(?:^\w|[A-Z]|\b\w)/g,((t,e)=>0===e?t.toLowerCase():t.toUpperCase())).replace(/\s+/g,"")}function n(t,e=0,i=" "){return t.length>=e?String(t):n(t+i,e,i)}
/**
    * cliParam v1.0.0
    * (c) 2018-2022 ymc
    * @license MIT
    */function i(t,n={}){let i={};const s=Object.keys(t).map((e=>t[e])),o={slim:!0,modeStyle:"cli",...n};"string"===o.mode&&(o.slim=!0);for(let t=0;t<s.length;t+=1){const n=s[t],{name:r,type:l,value:a,desc:p}=n,[c,u]=r.split(/,/).map((t=>t.trim().replace(/^-*/gi,""))),m=c.length>1?c:u;if(m){if(o.noAutoCamelize||(i[e(m)]=a),o.slim)continue;i[m]=a}i[c]=a}return"string"===o.mode&&(i=function(t,e){const n={modeStyle:"cli",...e};let i="";return"string"===n.mode&&"cli"===n.modeStyle&&(i=Object.keys(t).map((e=>e.length>1?`--${e}=${t[e]}`:`-${e}=${t[e]}`)).join(" ")),"string"===n.mode&&"httpquery"===n.modeStyle&&(i=Object.keys(t).map((e=>`${e}=${t[e]}`)).join("&")),"string"===n.mode&&"swithoption"===n.modeStyle&&(i=Object.keys(t).map((e=>`${e}=${t[e]}`)).join(";")),i}(i,o)),i}function s(t={},n={}){const i={slim:!0,...n};return i.noAutoCamelize||Object.keys(t).forEach((n=>{const s=e(n);s!==n&&(t[s]=t[n],i.slim&&delete t[n])})),t}const{log:o}=console;function r(t,e,n={}){let i;return i=t[e]?t[e]:n,i}function l(t,e="",n=""){let i=t;return e&&n?(i=r(i,e),i=r(i,n)):e?i=r(i,e):n&&(i=r(i,n)),i}function a(t="",e="l"){let n="";if(n=t.split(" ")[0].split(",").map((t=>t.replace(/^-*/gi,""))),"s"===e.toLowerCase())n=n[0];else n=n[1]?n[1]:n[0];return n}function p(t,e="",n=2){let i;return i=Array.isArray(t)?t:[t],i.join("\n").replace(/^/gim,Array(n).fill(e).join(""))}function c(t){let e=Array.isArray(t)?t:[t];const i=Math.max(...e.map((t=>t.split(" ")[0].length)));return e=e.map((t=>{const e=t.split(" ");let s=e[0];const o=e.slice(1);return s=n(s,i+6," "),`${s}${o.join(" ")}`})),e}function u(t,e=""){const n=new RegExp(` *${t}:.*`,"ig"),i=e.match(n);return i?i[0].replace(new RegExp(` *${t}:`,"i"),""):""}function m(t={},e="npm-bin",n="1.0.0",i=""){let s={};return s={...t,version:n,ns:e},i&&(s={autoSubCmd:u("subcmd",i),autoSubNs:u("subns",i)}),s}class g{constructor(){this.init()}init(){return this.optionMap={},this.opt="",this.relationMap={},this.cmd=new Set,this.ns=new Set,this.paramMap={},this}addOpt(t="",e="",n=""){const{optionMap:i,relationMap:s}=this,o=a(t);let r=i;return r[o]=t,r=l(s,e,n),r[o]=!0,this.cmd.add(n),this.ns.add(e),this}getOpt(t,e="",n=""){const{optionMap:i,relationMap:s}=this,o=i;return this.opt=o[t],this}logOpt(){return o(this.opt),this}bindOpt(t="",e=""){return this.addOpt(this.opt,t,e),this}usage(t="",e=""){const{optionMap:n,relationMap:i}=this;let s,o,r;s=l(i,t,e),o=Object.keys(s),o=o.filter((t=>!this.cmd.has(t))),o=o.filter((t=>!this.ns.has(t))),s=n,r=Object.keys(s).filter((t=>o.includes(t))).map((t=>s[t])),r=c(r),r=p(r," ",2),r=`option:\n${r}`;let a=[...this.ns].filter((t=>t.trim())).join("|");a=a?`subns:${a}`:"";let u=[...this.cmd].filter((t=>t.trim())).join("|");u=u?`subcmd:${u}`:"";let m="usage:{ns} [option]";return a&&(m=m.replace(/\[option\]$/,"[subns] [option]")),u&&(m=m.replace(/\[option\]$/,"[subcmd] [option]")),u&&(r=`${u}\n${r}`),a&&(r=`${a}\n${r}`),r=p(r," ",2),m&&(r=`${m}\n${r}`),r}param(t,e="",n=""){const{paramMap:i}=this;return t.forEach((t=>{i[t.name]||(i[t.name]=t);const{name:s,type:o,value:r,desc:l}=t;this.addOpt(`${s} ${l}`,e,n)})),this}getBuiltinConfig(t={}){const{paramMap:e}=this;return i(e,t)}getCliFlags(t,e={}){let n;const{entrys:i}=e;return n=t.flags||i&&i.notOnlyFlags?t.flags:t,s(n,e)}getCurrentFlags(t,e={}){let n;return n={...this.getBuiltinFlags(),...this.getCliFlags(t,e)},n=s(n,e),n}camelizeFlags(t={},e={}){return s(t,e)}updateEntryOption(t,e="npm-bin",n="1.0.0"){const{usagemsg:i}=this;return m(t,e,n,i)}}const h=new g;t.CliOptionHelp=g,t.beautyOptionText=c,t.cliOptionHelp=h,t.formatOptionText=p,t.getCliOptionName=a,t.getTxtFromUsage=u,t.updateEntryOption=m,Object.defineProperty(t,"__esModule",{value:!0})}));
