/**
  * gitCommitLogsInfo v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
import"@ymc/run-bash";import"@ymc/extend-string";import{jsonstream as o}from"@ymc/json-stream-io";import{store as t}from"@ymc/git-commit-msg-read";const{log:n}=console;function i(o){return function(...t){o&&n(...t)}}async function s(s={}){const a={out:"gitlog-info.shim.tmp.json",n:10,logInfo:!1,logTask:!1,...s},e=i(a.logInfo),m=i(a.logTask);let r,c=a.out;m(`[task] update git commited logs to ${c}`),a.n&&(e("[info] read the last gitlog"),t.options.n=a.n);const g=await t.parse();e("[info] store gitlog"),o.init(c),r=await o.read([]);let f=0;g.forEach((o=>{r.some((t=>t.hash===o.hash))||(r.unshift(o),f+=1)})),await o.write(r),e(`[info] out: ${c}`),n(`[info] update count: ${f}`)}export{s as default};
