/**
  * gitCommitLogsInfo v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
import{store as o}from"@ymc/git-commit-msg-read";import"@ymc/run-bash";import"@ymc/extend-string";import{jsonstream as t}from"@ymc/json-stream-io";const{log:n}=console;function i(o){return function(...t){o&&n(...t)}}async function s(s={}){const a={out:"gitlog-info.shim.tmp.json",n:10,logInfo:!1,logTask:!1,...s},e=i(a.logInfo),m=i(a.logTask),r=a.out;let c;m(`[task] update git commited logs to ${r}`),a.n&&(e("[info] read the last gitlog"),o.options.n=a.n);const g=await o.parse();e("[info] store gitlog"),t.init(r),c=await t.read([]);let f=0;g.forEach((o=>{c.some((t=>t.hash===o.hash))||(c.unshift(o),f+=1)})),await t.write(c),e(`[info] out: ${r}`),n(`[info] update count: ${f}`)}export{s as default};
