"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("node:fs");
/**
  * streamIo v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */class e{constructor(t,e){this.init(t,e)}async read(e={}){const{file:r}=this;let a,n;try{a=t.createReadStream(r.name),n=await(s=a,new Promise(((t,e)=>{let r="";s.on("data",(t=>{r+=t.toString()})).on("end",(()=>{t(r)})).on("error",e)}))),n=JSON.parse(n)}catch(t){n=e}var s;return r.data=n,n}async write(e){const{file:r,option:a}=this;let n,s=e;try{n=t.createWriteStream(r.name),e?r.data=e:s=r.data,await function({stream:t,data:e}){return new Promise(((r,a)=>{t.write(e,"utf-8"),t.end(),t.on("finish",(()=>{r(e)})).on("error",a)}))}({stream:n,data:JSON.stringify(s,null,2)})}catch(t){}}init(t="package.json",e={}){this.file={name:t,data:e},this.option={}}new(...t){return new e(...t)}}const r=new e;exports.JsonStream=e,exports.jsonstream=r;
