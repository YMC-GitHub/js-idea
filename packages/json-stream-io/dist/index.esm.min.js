/**
  * jsonStreamIo v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
import{createReadStream as t,createWriteStream as a}from"node:fs";import{readStream as i,writeStream as n}from"@ymc/stream-io";class e{constructor(t,a){this.init(t,a)}async read(a={}){const{file:n}=this;let e,r;try{e=t(n.name),r=await i(e),r=JSON.parse(r)}catch(t){r=a}return n.data=r,r}async write(t){const{file:i,option:e}=this;let r,s=t;try{r=a(i.name),t?i.data=t:s=i.data,await n({stream:r,data:JSON.stringify(s,null,2)})}catch(t){}}init(t="package.json",a={}){this.file={name:t,data:a},this.option={}}new(...t){return new e(...t)}}const r=new e;export{e as JsonStream,r as jsonstream};
