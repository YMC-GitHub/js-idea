/**
  * moduleAlias v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("node:fs")):"function"==typeof define&&define.amd?define(["exports","node:fs"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["module-alias"]={},e.node_fs)}(this,(function(e,t){"use strict";
/**
    * streamIo v1.0.0
    * (c) 2018-2022 ymc
    * @license MIT
    */
/**
    * jsonStreamIo v1.0.0
    * (c) 2018-2022 ymc
    * @license MIT
    */
class n{constructor(e,t){this.init(e,t)}async read(e={}){const{file:n}=this;let s,i;try{s=t.createReadStream(n.name),i=await(o=s,new Promise(((e,t)=>{let n="";o.on("data",(e=>{n+=e.toString()})).on("end",(()=>{e(n)})).on("error",t)}))),i=JSON.parse(i)}catch(t){i=e}var o;return n.data=i,i}async write(e){const{file:n,option:s}=this;let i,o=e;try{i=t.createWriteStream(n.name),e?n.data=e:o=n.data,await function({stream:e,data:t}){return new Promise(((n,s)=>{e.write(t,"utf-8"),e.end(),e.on("finish",(()=>{n(t)})).on("error",s)}))}({stream:i,data:JSON.stringify(o,null,2)})}catch(e){}}init(e="package.json",t={}){this.file={name:e,data:t},this.option={}}new(...e){return new n(...e)}}const s=new n;function i(e,t={}){const n={useRegexpPrefix:!0,useRegexpSuffix:!0,...t};if(!e.alias)return;const{alias:s}=e,i=Object.keys(s),o={};for(let e=0;e<i.length;e+=1){let t=i[e];if(t=t.trim(),!t)continue;let r=s[t];r&&(n.useRegexpSuffix&&(t=t.replace(/(\*)?$/,"*"),r=r.replace(/(\*)?$/,"*")),o[t]=[r])}return o}function o(e,t){return t.some((t=>t===e))}function r(e={},t="",n={}){const s={sep:".",...n},{val:i,sep:o}=s;let r=e;const l=t.split(o);if(l.length<=1)return r;const a=l.length-1,u=l[a];for(let e=0;e<a;e+=1){const t=l[e];r[t]||(r[t]={}),r=r[t]}return r&&void 0!==i&&(r[u]=i),r}function l(e,t,n){let s=e[t];s=s?[...new Set([...n,...s])]:n,e[t]=s}function a(e){let t=e||[];return Array.isArray(t)?t:[t]}function u(e){return e.map((e=>e.replace(/^./,"")))}e.BabelbabelAliasDefineEng=class{constructor(){this.data={}}cwd(e){const{data:t}=this;if(!o(e,["packagejson","babelrc",""]))return this;if(""===e)delete t.cwd;else t.cwd=e;return this}root(e){if(!e)return this;let{data:{root:t}}=this;return t||(t=[]),o(e,t)||(t.push(e),this.data.root=t),this}alias(e,t,n){if(!e)return this;if(!t)return this;let{data:{alias:s}}=this;return s||(s={}),s[e]=t,this.data.alias=s,this}},e.getModuleAliasInBabelConfig=function(e){let t={};const{plugins:n=[[]]}=e;for(let e=0;e<n.length;e+=1){const[s,i]=n[e];if("babel-plugin-module-resolver"===s){t=i;break}}return t},e.hunmanJson=function(e,t=4){return JSON.stringify(e,null,t)},e.jsonstream=s,e.ma2babel=function(e,t={}){const n={useRegexpPrefix:!0,useRegexpSuffix:!0,...t};if(!e.alias)return;const{alias:s}=e,i=Object.keys(s),o={};for(let e=0;e<i.length;e+=1){let t=i[e];if(t=t.trim(),!t)continue;let r=s[t];r&&(n.useRegexpPrefix&&(t=t.replace(/^\^?/,"^")),n.useRegexpSuffix&&(t=t.replace(/\$?$/,"(.+)$"),r=r.replace(/\\?1?$/,"\\1")),o[t]=r)}return o},e.ma2eslint=function(e,t={}){if(!e.alias)return;const{alias:n}=e,s=Object.keys(n);let i={};for(let e=0;e<s.length;e+=1){let t=s[e];if(t=t.trim(),!t)continue;const o=n[t];o&&(i[t]=[t,o])}return i=Object.values(i),i},e.ma2jest=function(e,t={}){const n={useRegexpPrefix:!0,useRegexpSuffix:!0,...t};if(!e.alias)return;const{alias:s}=e,i=Object.keys(s),o={};for(let e=0;e<i.length;e+=1){let t=i[e];if(t=t.trim(),!t)continue;let r=s[t];r&&(n.useRegexpPrefix&&(t=t.replace(/^\^?/,"^"),r=r.replace(/^(\.\/)?/,"<rootDir>/")),n.useRegexpSuffix&&(t=t.replace(/\$?$/,"(.*?.?(js|vue)?|)$"),r=r.replace(/\\?1?$/,"$1")),o[t]=r)}return o},e.ma2jsconfig=i,e.ma2tsconfig=i,e.ma2vscodeconfig=function(e,t={}){const n={useRegexpPrefix:!0,useRegexpSuffix:!0,...t};if(!e.alias)return;const{alias:s}=e,i=Object.keys(s),o={};for(let e=0;e<i.length;e+=1){let t=i[e];if(t=t.trim(),!t)continue;let r=s[t];r&&(n.useRegexpPrefix&&(r=r.replace(/^(\.\/)?/,"${workspaceFolder}/")),o[t]=r)}return o},e.setModuleAliasToBabelConfig=function(e,t){e.plugins||(e.plugins=[]);const{plugins:n=[]}=e;let s=!1;const i=["node_modules","./"],o=["require","require.resolve","System.import","jest.genMockFromModule","jest.mock","jest.unmock","jest.doMock","jest.dontMock"];for(let e=0;e<n.length;e+=1){let[r,a]=n[e];if("babel-plugin-module-resolver"===r){a||(a={}),a={...a,...t},l(a,"transformFunctions",o),l(a,"root",i),n[e]=[r,a],s=!0;break}}if(!s){let e={...t};l(e,"transformFunctions",o),l(e,"root",i),n.push(["babel-plugin-module-resolver",e])}return e},e.setModuleAliasToEslintConfig=function(e,t){let n;return n=r(e,"settings.import/resolver.alias",{}),n=n.alias,l(n,"extensions",[".ts",".tsx",".js",".jsx",".json",".vue"]),l(n,"extensions",a(t.extensions)),e},e.setModuleAliasToJest=function(e,t){let n=[".ts",".tsx",".js",".jsx",".json",".vue"];return n=u(n),e.moduleNameMapper=t.map,l(e,"moduleFileExtensions",n),l(e,"moduleFileExtensions",u(a(t.extensions))),e},e.setModuleAliasToJsconfig=function(e,t){let n=r(e,"compilerOptions");return n=n.compilerOptions,n.paths=t.map,t.root&&(n.baseUrl=t.root),e},e.setModuleAliasToVscodeSettings=function(e,t){return e["path-intellisense.mappings"]=t,e},Object.defineProperty(e,"__esModule",{value:!0})}));
