/**
  * promiseAll v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self)["promise-all"]=e()}(this,(function(){"use strict";
/**
    * limitAsyncHandle v1.0.0
    * (c) 2018-2022 ymc
    * @license MIT
    */const{log:t}=console;class e{constructor(t){this.init(t)}init(t){return this._max=t,this._count=0,this._taskQueue=[],this._debug=!1,this._cb=null,this}call(t,...e){return new Promise(((n,s)=>{const i=this._createTask(t,e,n,s);this._count>=this._max?this._taskQueue.push(i):i()}))}_createTask(t,e,n,s){return()=>{t(...e).then(n).catch(s).finally((()=>{this._next()})),this._nextTick()}}_next(){if(this._count-=1,this._taskQueue.length){this._taskQueue.shift()()}else this._debug&&t("task count = ",this._count),this._cb&&this._cb()}_nextTick(){this._count+=1,this._debug&&t("task count = ",this._count)}}new e;
/**
    * kindOf v1.0.0
    * (c) 2018-2022 ymc
    * @license MIT
    */
const{toString:n}=Object.prototype,s=(i=Object.create(null),t=>{const e=n.call(t);return i[e]||(i[e]=e.slice(8,-1).toLowerCase())});var i;return function(t,n){return new Promise(((i,o)=>{const c=n||t.length,u=new e(c),r=[],h=e=>{let n=t[e];return"asyncfunction"===s(n)?n=n():"function"===s(n)&&(n=Promise.resolve(n())),n.then((t=>{u._debug?r[e]={index:e,data:t,state:"ok"}:r[e]=t}),(t=>{u._debug?r[e]={index:e,state:"no",error:t}:r[e]=t})).finally((()=>{u._cb=()=>{
//! this._taskQueue.length && this._count===0
0===u._count&&i(r)}}))};for(let e=0;e<t.length;e+=1)u.call(h,e)}))}}));
