/**
  * readDiretory v0.0.1
  * (c) 2018-2022 ymc
  * @license MIT
  */
"use strict";var e=require("node:fs"),r=require("node:path");const{log:t}=console,n=r=>e.statSync(r).isDirectory();function o(e){if(!e)return!1;const r=typeof e;return!["boolean","string","number","function"].some((e=>e===r))&&!("object"!==r||!e.test)}function i(e){return"file_text"===e}function u(e){console.log(`found in:${e}`)}const s=[];module.exports=function c(f,l){let[d,a]=function(e){let r,n;if(!e)return[];if(o(e))r=e,n={parsed:!0,regexp:r},t(e,r,o(e));else{if(!o(e.regexp))return[];r=e.regexp,n=e,n.parsed=!0}return[r,n]}(l);if(!d||!a)return s;if(a={mode:"file",...a},!n(f)&&("file"!==a.mode&&!i(a.mode)))return s;const x=r.basename(f);if(function(e){return Array.isArray(e)}(a.excludes)&&a.excludes.includes(x))return s;if(a.excludesRegexp&&a.excludesRegexp.test(x))return s;if(d.test(x)&&!i(a.mode))return a.log&&u(f),s.push(f),s;if(i(a.mode)&&(p=f,e.statSync(p).isFile())){const r=e.readFileSync(f);if(a.fileTextRegexp&&a.fileTextRegexp.test(r))return a.log&&u(f),s.push(f),s}var p;if(!n(f))return s;const g=e.readdirSync(f);return g.length>0&&g.forEach((e=>{c(r.join(f,e),a)})),s};
