/**
  * readDiretory v0.0.1
  * (c) 2018-2022 ymc
  * @license MIT
  */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("node:fs"),require("node:path")):"function"==typeof define&&define.amd?define(["node:fs","node:path"],n):(e="undefined"!=typeof globalThis?globalThis:e||self)["read-diretory"]=n(e.node_fs,e.node_path)}(this,(function(e,n){"use strict";const{log:t}=console,r=n=>e.statSync(n).isDirectory();function o(e){if(!e)return!1;const n=typeof e;return!["boolean","string","number","function"].some((e=>e===n))&&!("object"!==n||!e.test)}function i(e){return"file_text"===e}function f(e){console.log(`found in:${e}`)}const u=[];return function s(d,c){let[l,p]=function(e){let n,r;if(!e)return[];if(o(e))n=e,r={parsed:!0,regexp:n},t(e,n,o(e));else{if(!o(e.regexp))return[];n=e.regexp,r=e,r.parsed=!0}return[n,r]}(c);if(!l||!p)return u;if(p={mode:"file",...p},!r(d)&&("file"!==p.mode&&!i(p.mode)))return u;const a=n.basename(d);if(function(e){return Array.isArray(e)}(p.excludes)&&p.excludes.includes(a))return u;if(p.excludesRegexp&&p.excludesRegexp.test(a))return u;if(l.test(a)&&!i(p.mode))return p.log&&f(d),u.push(d),u;if(i(p.mode)&&(x=d,e.statSync(x).isFile())){const n=e.readFileSync(d);if(p.fileTextRegexp&&p.fileTextRegexp.test(n))return p.log&&f(d),u.push(d),u}var x;if(!r(d))return u;const g=e.readdirSync(d);return g.length>0&&g.forEach((e=>{s(n.join(d,e),p)})),u}}));
