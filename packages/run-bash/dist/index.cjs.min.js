"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("node:child_process");const r=e=>(r,n="cp936",o="binary")=>(e.skipDecodeWarning=!0,e.decode(Buffer.from(r,o),n));function n(e){return e.split(/\r?\n/).map((e=>e.trim())).filter((e=>e)).join("\n")}const o={exec:e.exec};exports.defFixUnreadbleCode=r,exports.exec=(r,o,c)=>new Promise(((i,t)=>{c||(c=o,o=r,r="");const s=((e,r=" ")=>Array.isArray(e)?e.join(r):e)(o);(c.exec?c.exec:e.exec)(`${r=r?`${r} ${s}`:`${s}`}`,c,((e,r,o)=>{const{fixUnreadbleCode:s}=c;if(s){const{iconvDesEncoding:e,iconvSrcEncoding:n}=c;r&&(r=s(r,e,n)),o&&(o=s(o,e,n))}e&&c.exitWhenErr&&t(e),c.noTrimOut||(r=n(r),o=n(o)),c.rejectStderr&&(o&&t(e),i(r)),i({stdout:r,stderr:o})}))})),exports.execOpts=o,exports.setExecOptsForIconv=(e,n)=>{n.encoding="buffer",n.iconvDesEncoding="cp936",n.iconvSrcEncoding="binary",n.fixUnreadbleCode=r(e)};
