/**
  * textStreamIo v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("node:fs");
/**
  * streamIo v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */class t{constructor(e="CHANGELO.md"){this.init(e)}async read(t=""){const{file:r}=this;let a,n;try{a=e.createReadStream(r.name),n=await(i=a,new Promise(((e,t)=>{let r="";i.on("data",(e=>{r+=e.toString()})).on("end",(()=>{e(r)})).on("error",t)})))}catch(e){n=t}var i;return r.data=n,n}async write(t){const{file:r,option:a}=this;let n,i,s;switch(n=e.createWriteStream(r.name),i=r.data,a.writemode){case"override":default:s=`${t}`;break;case"append":s=`${i}\n${t}`;break;case"head":s=`${t}\n${i}`}r.data=s,await function({stream:e,data:t}){return new Promise(((r,a)=>{e.write(t,"utf-8"),e.end(),e.on("finish",(()=>{r(t)})).on("error",a)}))}({stream:n,data:s})}init(e="CHANGELO.md",t=""){return this.file={name:e,data:t},this.option={},this}new(...e){return new t(...e)}}const r=new t;exports.TextStream=t,exports.textstream=r;
