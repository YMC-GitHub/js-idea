/**
  * textStreamIo v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("node:fs")):"function"==typeof define&&define.amd?define(["exports","node:fs"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["text-stream-io"]={},e.node_fs)}(this,(function(e,t){"use strict";
/**
    * streamIo v1.0.0
    * (c) 2018-2022 ymc
    * @license MIT
    */class n{constructor(e="CHANGELO.md"){this.init(e)}async read(e=""){const{file:n}=this;let a,r;try{a=t.createReadStream(n.name),r=await(i=a,new Promise(((e,t)=>{let n="";i.on("data",(e=>{n+=e.toString()})).on("end",(()=>{e(n)})).on("error",t)})))}catch(t){r=e}var i;return n.data=r,r}async write(e){const{file:n,option:a}=this;let r,i,o;switch(r=t.createWriteStream(n.name),i=n.data,a.writemode){case"override":o=`${e}`;break;case"append":o=`${i}\n${e}`;break;default:o=`${e}\n${i}`}n.data=o,await function({stream:e,data:t}){return new Promise(((n,a)=>{e.write(t,"utf-8"),e.end(),e.on("finish",(()=>{n(t)})).on("error",a)}))}({stream:r,data:o})}init(e="CHANGELO.md",t=""){return this.file={name:e,data:t},this.option={},this}new(...e){return new n(...e)}}const a=new n;e.TextStream=n,e.textstream=a,Object.defineProperty(e,"__esModule",{value:!0})}));
