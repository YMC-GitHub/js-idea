/**
  * ycsApi v0.0.2
  * (c) 2018-2022 ymc
  * @license MIT
  */
!function(s,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((s="undefined"!=typeof globalThis?globalThis:s||self)["ycs-api"]={})}(this,(function(s){"use strict";const e=s=>!!["true",!0].includes(s)||!["false",!1].includes(s)&&(Number(s)?Number(s):s),t=()=>({helpmsg:"usage:ns option",argvIndexS:2,enbaleSubCmd:!1,subcmd:"",allowAutoSubCmd:!0,autoSubCmd:"",version:"1.0.0",ns:"ycs",enbaleSubNs:!1,subns:"",allowAutoSubNs:!0,autoSubNs:""}),{log:n}=console;s.Ycs=class{constructor(){this.option={helpmsg:"usage:ns option",argvIndexS:2,enbaleSubCmd:!1,subcmd:"",allowAutoSubCmd:!0,autoSubCmd:"",version:"1.0.0",ns:"ycs",enbaleSubNs:!1,subns:"",allowAutoSubNs:!0,autoSubNs:""}}ns(s="ns"){return this.option.ns=s,this}version(s="1.0.0"){return this.option.version=s,this}entry(s={}){return this.option.entrys=s,this}autosubcmd(s=""){return this.option.autoSubCmd=s,this}autosubns(s=""){return this.option.autoSubNs=s,this}nanoparse(s=(()=>{})){return this.option.nanoparse=s,this}run(s){let{entrys:t,helpmsg:o,argvIndexS:i,enbaleSubCmd:u,subcmd:l,allowAutoSubCmd:r,autoSubCmd:a,version:d,ns:c,enbaleSubNs:p,subns:b,allowAutoSubNs:f,autoSubNs:h}=this.option;!p&&f&&h&&(h=Array.isArray(h)?h:h.split("|"),p=h.includes(s[i])),p&&(b=s[i],i+=1,o=o.replace(/option$/,"subns option")),!u&&r&&a&&(a=Array.isArray(a)?a:a.split("|"),u=a.includes(s[i])),u&&(l=s[i],i+=1,o=o.replace(/option$/,"subcmd option"));let g=t;if(o=t.usage,p&&b){if(!g[b])return n(`${o}`),void n(`todo:subns:${b}`);o=g[b].usage?g[b].usage:o,d=g[b].version?g[b].version:d,g=g[b]?g[b]:()=>{}}if(u&&l){if(!g[l])return n(`${o}`),void n(`todo:subcmd:${l}`);o=g[l].usage?g[l].usage:o,d=g[l].version?g[l].version:d,g=g[l]?g[l]:()=>{}}let m=s.length<=i;if(t.enableZeroOption&&(m=s.length<i),g.enableZeroOption&&(m=s.length<i),m)return n(`${o}`),void n("error:invalid argv length");const S=function(s){let t=[],n=s;const o=[];s.includes("--")&&(t=s.slice(s.indexOf("--")+1),n=s.slice(0,s.indexOf("--")));const i=[];for(let s=0;s<n.length;s++){const e=n[s-1],t=n[s],u=n[s+1],l=u&&!/^--.+/.test(u)&&!/^-.+/.test(u),r=s=>{i.push([s,!l||u])};if(/^--.+=/.test(t)||/^-.=/.test(t))i.push(t.split("="));else if(/^-[^-].*/.test(t)){let s=t;if(s.includes("=")){const e=s.indexOf("=");i.push([s.slice(e-1,e),s.slice(e+1,e+2)]),s=s.slice(0,e-1)+s.slice(e+2)}for(const e of s.slice(1).split("").slice(0,-1))i.push([e,!0]);r(s[s.length-1])}else if(/^--.+/.test(t)||/^-.+/.test(t))r(t);else{let s=i.find((s=>s[0]===e));if(!s&&/^-./.test(e)){const t=e[e.length-1];s=i.find((s=>s[0]===t))}s||o.push(t)}}const u={};for(const s of i){let t=s[0].replace(/^-{1,2}/g,""),n=s[1];t.startsWith("no-")&&[void 0,!0].includes(n)&&(t=t.slice(3),n=!1),u[t]=e(n)}return{flags:u,_:o.map((s=>e(s))),extras:t.map((s=>e(s)))}}(s.slice(i)),v=S.flags;if((v.debugArgs||v.da)&&n(S),v.version||v.v)n(`${c} version:${d}`);else{if(!v.help&&!v.h)return t.notOnlyFlags||g.notOnlyFlags?g(S):g(v);n(`${o}`)}}},s.defOption=t,s.installEntrys=(s={})=>e=>(s.option&&(e.option={...e.option,...s.option}),"version,ns,autoSubCmd,autoSubNs".split(",").forEach((t=>{s[t]&&(e.option[t]=s[t])})),e.entry(s),e),Object.defineProperty(s,"__esModule",{value:!0})}));
