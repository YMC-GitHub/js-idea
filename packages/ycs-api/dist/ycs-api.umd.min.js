/**
  * ycsApi v0.0.2
  * (c) 2018-2022 ymc
  * @license MIT
  */
!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s():"function"==typeof define&&define.amd?define(s):(e="undefined"!=typeof globalThis?globalThis:e||self)["ycs-api"]=s()}(this,(function(){"use strict";const e=e=>!!["true",!0].includes(e)||!["false",!1].includes(e)&&(Number(e)?Number(e):e),{log:s}=console;return class{constructor(){this.option={helpmsg:"usage:ns option",argvIndexS:2,enbaleSubCmd:!1,subcmd:"",allowAutoSubCmd:!0,autoSubCmd:"",version:"1.0.0",ns:"ycs",enbaleSubNs:!1,subns:"",allowAutoSubNs:!0,autoSubNs:""}}ns(e="ns"){return this.option.ns=e,this}version(e="1.0.0"){return this.option.version=e,this}entry(e={}){return this.option.entrys=e,this}autosubcmd(e=""){return this.option.autoSubCmd=e,this}autosubns(e=""){return this.option.autoSubNs=e,this}nanoparse(e=(()=>{})){return this.option.nanoparse=e,this}run(t){let{entrys:n,helpmsg:o,argvIndexS:i,enbaleSubCmd:u,subcmd:l,allowAutoSubCmd:r,autoSubCmd:a,version:c,ns:d,enbaleSubNs:p,subns:f,allowAutoSubNs:b,autoSubNs:h}=this.option;!p&&b&&h&&(h=Array.isArray(h)?h:h.split("|"),p=h.includes(t[i])),p&&(f=t[i],i+=1,o=o.replace(/option$/,"subns option")),!u&&r&&a&&(a=Array.isArray(a)?a:a.split("|"),u=a.includes(t[i])),u&&(l=t[i],i+=1,o=o.replace(/option$/,"subcmd option"));let g=n;if(o=n.usage,p&&f){if(!g[f])return s(`${o}`),void s(`todo:subns:${f}`);o=g[f].usage?g[f].usage:o,c=g[f].version?g[f].version:c,g=g[f]?g[f]:()=>{}}if(u&&l){if(!g[l])return s(`${o}`),void s(`todo:subcmd:${l}`);o=g[l].usage?g[l].usage:o,c=g[l].version?g[l].version:c,g=g[l]?g[l]:()=>{}}let m=t.length<=i;if(n.enableZeroOption&&(m=t.length<i),g.enableZeroOption&&(m=t.length<i),m)return s(`${o}`),void s("error:invalid argv length");const v=function(s){let t=[],n=s;const o=[];s.includes("--")&&(t=s.slice(s.indexOf("--")+1),n=s.slice(0,s.indexOf("--")));const i=[];for(let e=0;e<n.length;e++){const s=n[e-1],t=n[e],u=n[e+1],l=u&&!/^--.+/.test(u)&&!/^-.+/.test(u),r=e=>{i.push([e,!l||u])};if(/^--.+=/.test(t)||/^-.=/.test(t))i.push(t.split("="));else if(/^-[^-].*/.test(t)){let e=t;if(e.includes("=")){const s=e.indexOf("=");i.push([e.slice(s-1,s),e.slice(s+1,s+2)]),e=e.slice(0,s-1)+e.slice(s+2)}for(const s of e.slice(1).split("").slice(0,-1))i.push([s,!0]);r(e[e.length-1])}else if(/^--.+/.test(t)||/^-.+/.test(t))r(t);else{let e=i.find((e=>e[0]===s));if(!e&&/^-./.test(s)){const t=s[s.length-1];e=i.find((e=>e[0]===t))}e||o.push(t)}}const u={};for(const s of i){let t=s[0].replace(/^-{1,2}/g,""),n=s[1];t.startsWith("no-")&&[void 0,!0].includes(n)&&(t=t.slice(3),n=!1),u[t]=e(n)}return{flags:u,_:o.map((s=>e(s))),extras:t.map((s=>e(s)))}}(t.slice(i)),S=v.flags;if((S.debugArgs||S.da)&&s(v),S.version||S.v)s(`${d} version:${c}`);else{if(!S.help&&!S.h)return n.notOnlyFlags||g.notOnlyFlags?g(v):g(S);s(`${o}`)}}}}));
