/**
  * ycsHelpBindOption v0.0.2
  * (c) 2018-2022 ymc
  * @license MIT
  */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const{log:t}=console,e=(t,e,i={})=>{let s;return s=t[e]?t[e]:i,s},i=(t,i="",s="")=>{let n=t;return i&&s?(n=e(n,i),n=e(n,s)):i?n=e(n,i):s&&(n=e(n,s)),n},s=(t,e="",i=2)=>{let s;return s=Array.isArray(t)?t:[t],s.join("\n").replace(/^/gim,Array(i).fill(e).join(""))};exports.BindOption=class{constructor(){this.optionMap={},this.opt="",this.relationMap={},this.cmd=new Set,this.ns=new Set}addOpt(t="",e="",s=""){const{optionMap:n,relationMap:o}=this,r=((t="",e="l")=>{let i="";i=t.split(" ")[0].split(",").map((t=>t.replace(/^-*/gi,""))),i="s"===e.toLowerCase()?i[0]:i[1]?i[1]:i[0];return i})(t);let p=n;return p[r]=t,p=i(o,e,s),p[r]=!0,this.cmd.add(s),this.ns.add(e),this}getOpt(t,e="",i=""){const{optionMap:s,relationMap:n}=this,o=s;return this.opt=o[t],this}logOpt(){return t(this.opt),this}bindOpt(t="",e=""){return this.addOpt(this.opt,t,e),this}usage(t="",e=""){const{optionMap:n,relationMap:o}=this;let r,p,l;r=i(o,t,e),p=Object.keys(r),p=p.filter((t=>!this.cmd.has(t))),p=p.filter((t=>!this.ns.has(t))),r=n,l=Object.keys(r).filter((t=>p.includes(t))).map((t=>r[t])),l=s(l," ",2),l=`option:\n${l}`;let a=[...this.ns].filter((t=>t.trim())).join("|");a=a?`subns:${a}`:"";let h=[...this.cmd].filter((t=>t.trim())).join("|");h=h?`subcmd:${h}`:"";let c="usage:ns [option]";return a&&(c=c.replace(/\[option\]$/,"[subns] [option]")),h&&(c=c.replace(/\[option\]$/,"[subcmd] [option]")),h&&(l=`${h}\n${l}`),a&&(l=`${a}\n${l}`),l=s(l," ",2),c&&(l=`${c}\n${l}`),l}};
