/**
  * ycsHelpBindOption v0.0.2
  * (c) 2018-2022 ymc
  * @license MIT
  */
const{log:t}=console,i=(t,i,s={})=>{let e;return e=t[i]?t[i]:s,e},s=(t,s="",e="")=>{let n=t;return s&&e?(n=i(n,s),n=i(n,e)):s?n=i(n,s):e&&(n=i(n,e)),n},e=(t,i="",s=2)=>{let e;return e=Array.isArray(t)?t:[t],e.join("\n").replace(/^/gim,Array(s).fill(i).join(""))};class n{constructor(){this.optionMap={},this.opt="",this.relationMap={},this.cmd=new Set,this.ns=new Set}addOpt(t="",i="",e=""){const{optionMap:n,relationMap:o}=this,r=((t="",i="l")=>{let s="";s=t.split(" ")[0].split(",").map((t=>t.replace(/^-*/gi,""))),s="s"===i.toLowerCase()?s[0]:s[1]?s[1]:s[0];return s})(t);let p=n;return p[r]=t,p=s(o,i,e),p[r]=!0,this.cmd.add(e),this.ns.add(i),this}getOpt(t,i="",s=""){const{optionMap:e,relationMap:n}=this,o=e;return this.opt=o[t],this}logOpt(){return t(this.opt),this}bindOpt(t="",i=""){return this.addOpt(this.opt,t,i),this}usage(t="",i=""){const{optionMap:n,relationMap:o}=this;let r,p,a;r=s(o,t,i),p=Object.keys(r),p=p.filter((t=>!this.cmd.has(t))),p=p.filter((t=>!this.ns.has(t))),r=n,a=Object.keys(r).filter((t=>p.includes(t))).map((t=>r[t])),a=e(a," ",2),a=`option:\n${a}`;let l=[...this.ns].filter((t=>t.trim())).join("|");l=l?`subns:${l}`:"";let h=[...this.cmd].filter((t=>t.trim())).join("|");h=h?`subcmd:${h}`:"";let c="usage:ns [option]";return l&&(c=c.replace(/\[option\]$/,"[subns] [option]")),h&&(c=c.replace(/\[option\]$/,"[subcmd] [option]")),h&&(a=`${h}\n${a}`),l&&(a=`${l}\n${a}`),a=e(a," ",2),c&&(a=`${c}\n${a}`),a}}export{n as BindOption};
