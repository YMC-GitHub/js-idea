/**
  * ycsHelpBindOption v1.0.0
  * (c) 2018-2022 ymc
  * @license MIT
  */
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).ycsHelpBindOption={})}(this,(function(t){"use strict";function n(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function e(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return r(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}var o=console.log,i=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"l",e="";switch(e=t.split(" ")[0].split(",").map((function(t){return t.replace(/^\-*/gi,"")})),n.toLowerCase()){case"s":e=e[0];break;case"l":e=e[1]?e[1]:e[0]}return e},a=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t[n]=t[n]?t[n]:e,t[n]},c=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=t;return n&&e?(r=a(r,n),r=a(r,e)):n?r=a(r,n):e&&(r=a(r,e)),r},u=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;return(t=Array.isArray(t)?t:[t]).join("\n").replace(/^/gim,Array(e).fill(n).join(""))},l=function(){function t(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,t),this.optionMap={},this.opt="",this.relationMap={},this.cmd=new Set,this.ns=new Set}var r,a,l;return r=t,a=[{key:"addOpt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=this.optionMap,o=this.relationMap,a=i(t),u=r;return u[a]=t,(u=c(o,n,e))[a]=!0,this.cmd.add(e),this.ns.add(n),this}},{key:"getOpt",value:function(t){var n=this.optionMap;this.relationMap;var e=n;return this.opt=e[t],this}},{key:"logOpt",value:function(){return o(this.opt),this}},{key:"bindOpt",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.addOpt(this.opt,t,n),this}},{key:"usage",value:function(){var t,n,r,o=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",l=this.optionMap,s=this.relationMap;t=c(s,i,a),n=(n=(n=Object.keys(t)).filter((function(t){return!o.cmd.has(t)}))).filter((function(t){return!o.ns.has(t)})),t=l,r=Object.keys(t).filter((function(t){return n.includes(t)})).map((function(n){return t[n]})),r=u(r," ",2),r="option:\n".concat(r);var f=e(this.ns).filter((function(t){return t.trim()})).join("|");f=f?"subns:".concat(f):"";var p=e(this.cmd).filter((function(t){return t.trim()})).join("|");p=p?"subcmd:".concat(p):"";var d="usage:ns [option]";return f&&(d=d.replace(/\[option\]$/,"[subns] [option]")),p&&(d=d.replace(/\[option\]$/,"[subcmd] [option]")),p&&(r="".concat(p,"\n").concat(r)),f&&(r="".concat(f,"\n").concat(r)),r=u(r," ",2),d&&(r="".concat(d,"\n").concat(r)),r}}],a&&n(r.prototype,a),l&&n(r,l),Object.defineProperty(r,"prototype",{writable:!1}),t}();t.BindOption=l,Object.defineProperty(t,"__esModule",{value:!0})}));