/**
  * ycsHelpBindOption v0.0.2
  * (c) 2018-2022 ymc
  * @license MIT
  */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self)["ycs-help-bind-option"]={})}(this,(function(t){"use strict";const{log:e}=console,i=(t,e,i={})=>{let n;return n=t[e]?t[e]:i,n},n=(t,e="",n="")=>{let s=t;return e&&n?(s=i(s,e),s=i(s,n)):e?s=i(s,e):n&&(s=i(s,n)),s},s=(t,e="",i=2)=>{let n;return n=Array.isArray(t)?t:[t],n.join("\n").replace(/^/gim,Array(i).fill(e).join(""))};t.BindOption=class{constructor(){this.optionMap={},this.opt="",this.relationMap={},this.cmd=new Set,this.ns=new Set}addOpt(t="",e="",i=""){const{optionMap:s,relationMap:o}=this,r=((t="",e="l")=>{let i="";i=t.split(" ")[0].split(",").map((t=>t.replace(/^-*/gi,""))),i="s"===e.toLowerCase()?i[0]:i[1]?i[1]:i[0];return i})(t);let p=s;return p[r]=t,p=n(o,e,i),p[r]=!0,this.cmd.add(i),this.ns.add(e),this}getOpt(t,e="",i=""){const{optionMap:n,relationMap:s}=this,o=n;return this.opt=o[t],this}logOpt(){return e(this.opt),this}bindOpt(t="",e=""){return this.addOpt(this.opt,t,e),this}usage(t="",e=""){const{optionMap:i,relationMap:o}=this;let r,p,l;r=n(o,t,e),p=Object.keys(r),p=p.filter((t=>!this.cmd.has(t))),p=p.filter((t=>!this.ns.has(t))),r=i,l=Object.keys(r).filter((t=>p.includes(t))).map((t=>r[t])),l=s(l," ",2),l=`option:\n${l}`;let a=[...this.ns].filter((t=>t.trim())).join("|");a=a?`subns:${a}`:"";let d=[...this.cmd].filter((t=>t.trim())).join("|");d=d?`subcmd:${d}`:"";let c="usage:ns [option]";return a&&(c=c.replace(/\[option\]$/,"[subns] [option]")),d&&(c=c.replace(/\[option\]$/,"[subcmd] [option]")),d&&(l=`${d}\n${l}`),a&&(l=`${a}\n${l}`),l=s(l," ",2),c&&(l=`${c}\n${l}`),l}},Object.defineProperty(t,"__esModule",{value:!0})}));
